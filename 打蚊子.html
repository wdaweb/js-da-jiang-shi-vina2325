<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #bg {
            width: 100vw;
            height: 100vh;
            background-image: url(img/room-dark.jpg);
            background-size: cover;
            background-repeat: no-repeat;
            position: relative;
            overflow: hidden;


        }

        .cursor {
            cursor: url(img/cursor.png)50 50, auto;
            background-size: 200%;
        }

        #bg>img {
            position: absolute;
            height: 100px;
        }

        #btnStart {
            margin: auto;
            position: absolute;
            width: 100px;
            height: 50px;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            border-radius: 30% 30%;
        }
    </style>
</head>

<body>

    <div id="bg"><audio src="music/320723__djfroyd__mosquito-sound.wav" autoplay loop controls></audio>
        <input type="button" value="開始遊戲" id="btnStart">

    </div>
    <script src="jquery-3.5.0.min.js"></script>
    <script>
        const turnOn = new Audio();
        turnOn.src = "music/484719__ccr-fs__turn-on-the-stand.mp3";

        const die = new Audio();
        die.src = "music/441653__tonycarlisle__bug-zapper.mp3";

        let timeleft = 30;

        let gametimer = 0;

        let mosquito = 0;

        const rand = (num) => {
            return Math.round(Math.random() * num)
        }

        const move1 = (mosquito) => {
            $(`#ms${mosquito}`).animate({
                top: rand(90) + "%",
                left: rand(90) + "%"
            }, 3000, function () {
                move1(mosquito);
            })
        }

        const move2 = (mosquito) => {
            $(`#ms2${mosquito}`).animate({
                top: rand(90) + "%",
                left: rand(90) + "%"
            }, 3000, function () {
                move2(mosquito);
            })
        }

        const move3 = (mosquito) => {
            $(`#ms3${mosquito}`).animate({
                top: rand(90) + "%",
                left: rand(90) + "%"
            }, 3000, function () {
                move3(mosquito);
            })
        }



        $("#btnStart").click(function () {
            turnOn.play();
            setTimeout(() => {
                $(this).remove();
                $("#bg").css("background-image", "url('img/room-light.jpg')");

                $("#bg audio").attr("src", "music/3370__heatfuse__mosquito.mp3");

                $("#bg").addClass("cursor")

            }, 200);



            timeleft = 30;

            gametimer = setInterval(() => {
                const num = rand(10);

                if (num >= 4) {
                    $("#bg").append(`<img src="img/mosquito1.png" id="ms${mosquito}">`);
                    $(`#ms${mosquito}`).css({
                        top: rand(90) + "%", left: rand(90) + "%"
                    })
                    move1(mosquito);
                    mosquito++;

                }

                else if (num > 4 <= 8) {
                    $("#bg").append(`<img src="img/mosquito2.png" id="ms2${mosquito}">`);
                    $(`#ms2${mosquito}`).css({
                        top: rand(90) + "%", left: rand(90) + "%"
                    })
                    move2(mosquito);
                    mosquito++;
                }

                else if (num > 8 < 11) {
                    $("#bg").append(`<img src="img/mosquito3.png" id="ms3${mosquito}">`);
                    $(`#ms3${mosquito}`).css({
                        top: rand(90) + "%", left: rand(90) + "%"
                    })
                    move3(mosquito);
                    mosquito++;

                }
            }, 1000)

        })
        $("#bg").on("click", "img", function () {
            $(this).attr("src", "img/blood.gif")

            $(this).stop();
            die.play();

        })
    </script>
</body>

</html>